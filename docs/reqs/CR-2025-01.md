## CHANGE REQUEST DOCUMENT

**Project:** Transportation Portal - Frontend Component Architecture  
**Request ID:** CR-2025-001  
**Date:** October 3, 2025  
**Requested By:** Client (Halo Labs)  
**Prepared By:** Development Team

---

### EXECUTIVE SUMMARY

Refactor existing aircraft-specific components to support multiple transport types (planes, automobiles, marine vessels) through generic base interfaces and type-parameterized implementations.

---

### BUSINESS JUSTIFICATION

**Current State:**
- Application supports aircraft search only
- Components hardcoded with "aircraft" nomenclature
- Type definitions specific to planes

**Future Requirements:**
1. Automobile search capability (confirmed upcoming)
2. Marine vessel search capability (planned after automobiles)
3. Potential cross-transport unified search

**Risk of Not Implementing:**
- Code duplication across three transport types
- Maintenance burden (changes must be replicated 3x)
- Inconsistent user experience across transport types
- Technical debt accumulation

---

### SCOPE OF CHANGES

#### 1. **New Generic Base Models**
Create transport-agnostic base interfaces:

```typescript
TransportVehicle (base interface)
├── PlaneVehicle extends TransportVehicle
├── AutomobileVehicle extends TransportVehicle
└── MarineVehicle extends TransportVehicle
```

**Files Created:**
- `models/transport-vehicle.model.ts`

**Files Modified:**
- `models/index.ts` (add exports)
- `models/aircraft.model.ts` (create type alias for backward compatibility)

#### 2. **Component Refactoring**

**results-table component:**
- Rename: `results-table` → `transport-results-table`
- Change input: `@Input() aircraft: Aircraft[]` → `@Input() vehicles: TransportVehicle[]`
- Update template references
- Maintain column flexibility for type-specific fields

**histogram component:**
- No changes required (already generic)
- Accepts `HistogramData[]` interface

**pagination component:**
- No changes required (already generic)

#### 3. **State Management Service**

**Current:** `StateManagementService` (aircraft-only)

**Proposed:** Generic service with type parameter
```typescript
StateManagementService<T extends TransportVehicle>
```

**Configuration per transport type:**
```typescript
// For aircraft
new StateManagementService<PlaneVehicle>({
  apiEndpoint: '/api/v1/aircraft',
  transportType: 'plane'
})

// Future: For automobiles
new StateManagementService<AutomobileVehicle>({
  apiEndpoint: '/api/v1/automobile',
  transportType: 'automobile'
})
```

#### 4. **Search Component Updates**

**aircraft-search component:**
- Wire up with `PlaneVehicle` type
- Maintain existing functionality
- Update type references
- No user-facing changes

---

### API ENDPOINT STRATEGY

**Separate endpoints per transport type:**
- `/api/v1/aircraft` - Aircraft-specific searches
- `/api/v1/automobile` - Automobile-specific searches (future)
- `/api/v1/marine` - Marine vessel searches (future)
- `/api/v1/transport` - Cross-transport unified queries (future)

**Rationale:**
- Cleaner separation of concerns
- Type-specific validation/filtering
- Easier to optimize per transport type
- Maintains option for unified endpoint

---

### FUTURE ENHANCEMENTS (NOT IN SCOPE)

**Wildcard Search Support:**
- Current: `rob*` does not match `Robinson Helicopter Co`
- Required: Backend Elasticsearch query modification
- Change: `term` query → `wildcard` or `match` query
- **Status:** Documented for future implementation

---

### BACKWARD COMPATIBILITY

**Guaranteed:**
- Existing aircraft search functionality unchanged
- No breaking changes to current user workflows
- Type alias `Aircraft = PlaneVehicle` maintains compatibility

**Migration Path:**
- Gradual migration of references from `Aircraft` to `PlaneVehicle`
- Both types supported during transition period

---

### DELIVERABLES

1. Generic base model interfaces
2. Refactored `transport-results-table` component
3. Generic `StateManagementService<T>`
4. Updated `aircraft-search` component using new types
5. Updated unit tests (if applicable)
6. Documentation updates

---

### ESTIMATED EFFORT

**Development:** 4-6 hours
- Models creation: 1 hour
- Component refactoring: 2 hours
- State service generification: 2 hours
- Testing/validation: 1 hour

**Testing:** 2 hours
- Verify aircraft search still works
- Test URL persistence
- Validate histogram interactions
- Browser compatibility check

**Total:** 6-8 hours

---

### RISKS & MITIGATION

| Risk | Impact | Mitigation |
|------|--------|------------|
| Breaking changes to existing features | High | Comprehensive testing before merge |
| Generic types too complex | Medium | Keep simple, add complexity only when needed |
| Performance degradation | Low | Profile before/after, optimize if needed |

---

### ACCEPTANCE CRITERIA

- [ ] All existing aircraft search functionality works unchanged
- [ ] Components accept generic `TransportVehicle` types
- [ ] Code compiles without TypeScript errors
- [ ] Histograms display correctly with new types
- [ ] Pagination functions identically
- [ ] URL persistence works as before
- [ ] No console errors in browser
- [ ] Git commit with clear message describing changes

---

### APPROVAL

**Client Approval Required:** YES  

**Approved By:** ________________  
**Date:** ________________  

**Developer Assignment:** ________________  
**Estimated Completion Date:** ________________

---

**Notes:**
This change request establishes foundation for multi-transport support without implementing automobile or marine features. Those will be separate change requests referencing this architectural foundation.
